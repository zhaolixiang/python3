# 1、需求🙀

> 序列中含有一些数据，我们需要提取其中的值或根据某些标准对序列做删减，

# 2、解决方案😸

要筛选序列中的数据，通常最简单的方法是使用列表推导式。

例如：

```
myList=[1,4,-5,10,-7,2,3,-1]
print([n for n in myList if n>0])
print([n for n in myList if n<0])
```

结果：

```
[1, 4, 10, 2, 3]
[-5, -7, -1]
```

使用列表推导式的一个潜在缺点是如果原始输入非常大的话，这么做可能会产生一个庞大的结果。如果这是你需要考虑的问题，那么可以使用生成器表达式通过迭代的方法产生筛选结果，例如：

```
myList=[1,4,-5,10,-7,2,3,-1]
pos=(n for n in myList if n >0)
for x in pos:
    print(x)
```

结果：

```
1
4
10
2
3
```

有时候筛选的标准没法简单地表示在列表推导式或生成器表达式中。比如：假设筛选过程涉及异常处理或者其他一些复杂的细节。基于从，可以将处理筛选逻辑的代码放到单独的函数中，然后使用内建的filter\(\)函数处理，示例如下：

```
values=['1','2','-3','-','4','N/A','5']
def is_int(val):
    try:
        x=int(val)
        return True
    except ValueError:
        return False

ivals=list(filter(is_int,values))
print(ivals)
```

结果：

```
['1', '2', '-3', '4', '5']
```

filter\(\)创建了一个迭代器，因此如果我们想要的是列表形式的结果，请确保加上了list\(\)，就像示例中那样。

# 3、分析

列表推导式和生成器表达式通常是用来筛选数据的最简单和最直接的方式。此外，它们也具有同时对数据做转换的能力。例如：

```
import math
myList=[1,4,-5,10,-7,2,3,-1]
print([math.sqrt(n) for n in myList if n>0])
```

结果：

```
[1.0, 2.0, 3.1622776601683795, 1.4142135623730951, 1.7320508075688772]
```

关于筛选数据，有一种情况是用新值替换掉不满足标准的值，而不是抛弃它们。例如。除了要找到正整数之外，我们也希望在指定范围内将不满足要求的值替换掉。通常，这可以通过将筛选条件迁移到一个条件表达式中来轻松实现，就像下面这样：

```
myList=[1,4,-5,10,-7,2,3,-1]
print([n if n>0 else 0 for n in myList])
print([n if n<0 else 0 for n in myList])

```

结果：

```
[1, 4, 0, 10, 0, 2, 3, 0]
[0, 0, -5, 0, -7, 0, 0, -1]
```



