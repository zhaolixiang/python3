通过将统计数据和日志存储到Redis里面，我们可以收集访客在系统中的行为信息。但是直到目前为止，我们都忽略了访客行为中非常重要的一部分，那就是：这些访客是从哪里来的？为了回答这个问题，在这一节中，我们将构建一系列用于分析和载入IP所属地数据库的函数，并编写一个可以根据访客的IP地址来查找访客所在城市、行政区、国家的函数。我们先来看看下面这个例子。

随着Fake Game公司的游戏越来越受追捧，来自世界各地的玩家也越来越多。尽管像Google Analytics这样的工具可以让Fake Game公司知道玩家主要来自哪些国家或地区，但是为了更深入的了解玩家，Fake Game公司还希望自己能够知道玩家们所在的城市，而我们要做的就是将一个IP所属城市数据库载入Redis里面，然后通过搜索整个数据库来发现玩家所在的位置。

我们之所以使用Redis而不是传统的关系数据库来实现IP所属地查找功能，是因为Redis实现的IP所属地查找程序在运行速度上更具有优势。另一方面，因为对用户进行定位所需的信息量非常庞大，在应用程序启动时载入这些信息将影响应用程序的启动速度，所以我们也没有使用本地查找表来实现IP所属地查找功能。实现IP所属地查找功能首先要做的就是将一些数据表载入Redis里面，接下来的小节将对这个步骤进行介绍。



