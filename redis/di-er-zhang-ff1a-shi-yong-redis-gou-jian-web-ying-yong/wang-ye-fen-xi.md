网站可以从用户的访问、交互、购买行为中收集到有价值的信息。例如：如果我们只想关注那些浏览量最高的页面，那么我们可以尝试修改页面的格局、配色甚至是页面上展示的其他链接。每一个修改尝试都能改变用户对一个页面或者后续页面的体验，或好或坏，甚至还能影响用户的购买行为。

前面介绍了如果记录用户浏览过的商品或者用户添加到购物车中的商品、如何通过缓存web页面来减少页面载入时间并提升页面的响应速度。不过遗憾的是，我们对我们的网站做的过了火：我们网站总共包含100 000件商品，而冒然的缓存所有商品页面将耗尽整个网站的全部内存！经过一番调研之后，我们决定只对其中10 000件商品的页面进行缓存。

前面曾经介绍过，每个用户都有一个相应的记录用户浏览商品历史的有序集合，尽管使用这些有序集合可以计算出用户最近浏览的商品，但进行这种计算却需要消耗大量的时间。为了解决这个问题，我们决定在`update_token()`函数里面添加一行代码：

```

```

