到目前为止，我们已经：

* 将原本由关系数据库和网页浏览器实现的登录和访客会话转移到了Redis上面实现；
* 将原本有关系数据库实现的购物车也放到了Redis上面实现；
* 将所有页面缓存到了Redis里面；

这一系列工作提升了网站的性能，降低了关系数据库的负载并较少了网站的成本。

现在经过分析，我们的网站的商品页面通常只会从数据库里面载入一两行数据，包括已登录用户的用户信息【这些信息可以通过AJAX动态载入，所以不会对页面缓存造成影响】和商品本身的信息。即使是那些无法被整个缓存起来的页面：比如用户账号页面、记录用户以往购买商品的页面等等，程序也可以通过缓存页面载入时所需的数据库行来减少载入页面所需的时间。

为了展示数据行缓存的作用，我们假设我们的网站为了清空旧库存和吸引客户消费，决定开始新一轮的促销活动：这个活动每天都会推出一些特价商品供用户抢购，所有特价商品的数量都是限定的，卖完即止。在这种情况下，网址是不能对整个促销页面进行缓存的，因为这可能会导致用户看到错误的特价商品的剩余数量，但是每次载入页面都从数据库里面取出特价商品的剩余数量的话，又会给数据库带来巨大的压力，并导致我们需要花费额外的成本来扩展数据库。

为了应对促销互动带来的大量负载，我们需要对数据行进行缓存，具体的做法是：编写一个持续运行的守护进程函数，让这个函数将指定的数据行缓存到Redis里面，并不定期地对这些缓存进行更新。缓存函数会将数据行编码【encode】为JSON字典并存储在Redis的字符串里面，其中，数据列【column】的名字会被映射为JSON字典的键，而数据行的值则会被映射为JSON字典的值。



